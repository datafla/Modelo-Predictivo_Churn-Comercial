{"title":"ANÁLISIS: 'Relación entre patrones de contactabilidad y 'Churn Comercial'","markdown":{"yaml":{"title":"ANÁLISIS: 'Relación entre patrones de contactabilidad y 'Churn Comercial'","author":"Flavia Davila","format":{"html":{"code-fold":false,"code-tools":true,"df-print":"kable","embed-resources":true}},"editor":"visual","self-contained":true,"lang":"es","execute":{"echo":false}},"headingText":"import CSV to DataFrame","containsRefs":false,"markdown":"\n\n```{python}\n#| include: false\nimport os\nimport pandas as pd\nfrom datetime import datetime, timedelta\nimport plotly.express as px\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n```\n\n```{python}\n#| include: false\npastel_colors = [\n    'rgba(100, 140, 200, 0.9)', \n    'rgba(250, 120, 180, 0.9)', \n    'rgba(100, 200, 150, 0.9)',\n    'rgba(250, 250, 150, 0.9)',\n    'rgba(240, 150, 120, 0.9)'\n]\n\n```\n\n```{python}\n#| include: false\ndf_com = pd.read_csv(r'..\\data\\output_silver\\contact_metrics_com.csv')\ndf_exp = pd.read_csv(r'..\\data\\output_silver\\contact_metrics_exp.csv')\ndf = pd.read_csv(r'..\\data\\output_silver\\contact_metrics.csv')\n```\n\nSe plantea la hipótesis de que los patrones de contacto durante la etapa comercial podrían ser indicadores clave para predecir el \"Churn Comercial\" observado en la etapa de Experiencia.\n\nPara analizar esta idea, se ha examinado la información histórica de las actividades asociadas a todos los negocios ganados en la etapa comercial.\n\n## Datos Utilizados\n\nSe han utilizado los siguientes datos obtenidos del CRM Pipedrive:\\\n- Embudo Comercial: todas las actividades y todos los deals creados a partir de Enero del 2021 a la fecha, solo se consideraron los datos del embudo de Leads Calientes y en Estado 'Ganado'.\\\n- Embudo Experiencia: todas las actividades y todos los deals creados a partir de Enero del 2021 a la fecha, se consideraron los embudos 'Experiencia' y 'Churn'.\\\n\\\n**A partir de abril de 2024, se empezaron a considerar las etapas R1 y R2 en lugar de una única etapa denominada \"Reunión\". Cabe destacar que, para el periodo comprendido entre enero de 2021 y abril de 2024, la etapa única \"Reunión\" fue asociada retrospectivamente a la etapa R2.**\n\n## Caracteristicas de los Leads Ganados\n\n```{python}\n#| include: false\n# count leads per 'Origen'\ncount_leads = df.groupby('Origen')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='Origen', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Origen', \n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color='color',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nLa mayoría de los Deals se generan automáticamente a través de la API, representando más del 50% del total. Le siguen los Leads creados manualmente, mientras que los Deals Importados desde Marketplace o Chatbot tienen una proporción significativamente menor. Finalmente, los Leads generados desde Formularios Web constituyen la menor proporción de los canales analizados.\n\n```{python}\n#| include: false\n# count leads per 'Tipo de cliente'\ncount_leads = df.groupby('Tipo de cliente')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo de cliente', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Tipo de cliente', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors \n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'array', 'categoryarray': sorted(count_leads['Tipo de cliente'].unique())}\n)\n\nfig.show()\n```\n\nEl análisis muestra que la mayoría de los Leads ganados pertenecen a la categoría B, con un 64.38% del total, seguidos por los de categoría A (26.03%) y categoría C (9.59%).\n\nEsto indica que los Leads tipo B tienen una mayor probabilidad de conversión, aunque los Leads tipo C, a pesar de tener el porcentaje más bajo de conversión, aún tienen potencial para convertirse en Leads ganados, lo que sugiere que no están completamente fuera del alcance del proceso comercial.\n\n```{python}\n#| include: false\n# count leads per 'Canal Agrupado'\ncount_leads = df.groupby('Canal Agrupado')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='Canal Agrupado', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Canal Agrupado', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors \n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nEl canal que captura el mayor porcentaje de Leads ganados es 'Paid Ads', con un 61.64% del total. Le sigue el canal 'Orgánico' con 28.77%, mientras que 'Eventos' y 'Murturing' representan solo un 4.11% cada uno. Como se había anticipado, los canales con menor conversión, como Outbound y Referrals, no están presentes en este análisis.\n\nDado que 'Paid Ads' genera la mayor proporción de Leads, se sugiere reconsiderar la inversión mensual y ajustar el punto de equilibrio utilizando el modelo de regresión, considerando otras variables que puedan influir. Esto ayudaría a maximizar el rendimiento de este canal.\n\n```{python}\n#| include: false\n# count leads per '(C*)¿Quien toma la decisión de compra?'\ncount_leads = df.groupby('(C*)¿Quien toma la decisión de compra?')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='(C*)¿Quien toma la decisión de compra?', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por ¿Quien toma la decisión de compra?', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads, el 96% (70 Leads) cuenta con información sobre quién toma la decisión de compra.\n\nLa mayoría de los Leads ganados provienen de casos donde el decisor es quien establece el primer contacto con la empresa, representando el 47.14%. Esto indica que los Leads ganados suelen ser socios o dueños que se contactan directamente con tuGerente.com.\n\nUn 14.29% de los Leads ganados proviene de personas que contactan a tuGerente, pero no son los decisores finales. Esto sugiere que, aunque no sean los responsables de la decisión, juegan un rol relevante en el proceso.\n\nEl 8.57% restante de Leads ganados corresponde a personas que toman la decisión de compra junto a su pareja, lo que indica que, incluso en negocios pequeños o familiares, sigue existiendo potencial de conversión.\n\n```{python}\n#| include: false\n# count leads per '¿Cuál es tu nivel de urgencia para resolver tu problema? #1'\ncount_leads = df.groupby('¿Cuál es tu nivel de urgencia para resolver tu problema? #1')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='¿Cuál es tu nivel de urgencia para resolver tu problema? #1', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Nivel de Urgencia', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    #xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads, el 94.5% (69 Leads) tiene información sobre el nivel de urgencia. El 79.71% de los Leads ganados muestra alta urgencia, lo que resalta la importancia de priorizar este segmento para maximizar conversiones.\n\nCabe destacar la ausencia de Leads con baja urgencia, posiblemente por desinterés o falta de enfoque en su captura.\n\nEs crucial objetivizar esta variable para evitar interpretaciones subjetivas.\n\n## Características de las Actividades: Etapa Comercial\n\n### Contexto\n\nLas acciones dentro del **Embudo Comercial** corresponden a las siguientes **Etapas** y **Actividades**:\n\n### Etapas:\n\n-   **R1**: Primera Reunión, realizada de manera online (puede ser cancelada).\n-   **R2**: Segunda Reunión, que puede ser presencial (**insitu**), fuera de oficinas (**out**), u online.\n-   **Seguimiento**: Monitoreo y acciones posteriores al contacto inicial.\n-   **Cierre**: Etapa final para concretar la conversión del Lead.\n\n### Actividades entre Etapas:\n\n-   **Llamadas de Prospección**:\n    -   **Efectivas**: Cuando se establece un primer contacto significativo.\n    -   **No Efectivas**: Cuando el primer contacto no genera resultados.\n-   **Llamadas de Seguimiento**:\n    -   **Efectivas**: Cuando contribuyen al progreso del Lead.\n    -   **No Efectivas**: Cuando no generan avance.\n-   **Llamadas Sin Avance**: Llamadas contestadas o no, que no aportan información valiosa.\n-   **Seguimiento por WhatsApp (WSP)**: Comunicación adicional para dar continuidad al proceso.\n-   **Video WhatsApp**: Seguimiento o interacción mediante video.\n\n```{python}\n#| include: false\n# count leads per 'Tipo Primer Contacto'\ncount_leads = df.groupby('Tipo Primer Contacto')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Primer Contacto', \n    y='Cantidad de Leads', \n    title='Cantidad de Tipo de Primer Contacto Comercial', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDe los Leads ganados, solo el 75% tiene información sobre un primer intento de contacto, ya sea una Llamada de Prospección o una Llamada Sin Avance. Sin embargo, entre esos Leads, el 83.64% tuvo un primer contacto efectivo. Esto sugiere que cuando el primer contacto es efectivo, las probabilidades de conversión aumentan, mientras que la conversión disminuye si el primer contacto no es efectivo o no avanza.\n\n```{python}\n#| include: false\n# count leads per 'Tipo Primera Reunión'\ncount_leads = df.groupby('Tipo Primera Reunión_x')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Primera Reunión_x', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads segun Tipo de R1', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    #xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads registrados, solo el 39.7% (29 Leads) tiene información sobre si se realizó una Primera Reunión, lo que sugiere que no siempre se lleva a cabo para considerar un Lead como \"ganado\".\n\nPor otro lado, el 100% de los Leads ganados que tienen registrada una Primera Reunión la han completado. Esto sugiere que agendar y realizar la Primera Reunión sin cancelaciones es clave para la conversión exitosa del Lead.\n\n```{python}\n#| include: false\n# count leads per 'Tipo Primera Reunión'\ncount_leads = df.groupby('Tipo Segunda Reunión')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Segunda Reunión', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads segun Tipo de R2', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    #xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads registrados, solo el 78% (57 Leads) tiene información sobre si se realizó una Segunda Reunión (R2). Esto sugiere que no siempre se lleva a cabo una Segunda Reunión para considerar un Lead como \"ganado\". La mayoría de la información sobre la Segunda Reunión se debe a que la etapa \"Reunión\" se asoció retrospectivamente con R2.\n\nPor otro lado, el 100% de los Leads ganados que tienen registrada una Segunda Reunión la han completado, lo que indica que agendar y realizar esta reunión sin cancelaciones es un factor clave para la conversión exitosa del Lead.\n\n```{python}\n#| include: false\n# count leads per 'Rango de Contacto'\ncount_leads = df.groupby('Rango de Contacto')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Rango de Contacto', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads segun Rango de Contacto', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nSe observa que la mayoría de los Leads \"Ganados\" presentan un alto porcentaje de Llamadas de Prospección fuera del rango de los 6 minutos, o directamente no tienen intento de Primera Llamada dentro de este intervalo, según análisis previos.\n\nEsto sugiere que el rango de los 6 minutos podría no ser determinante en la conversión de Leads, o que existe un error en el llenado de los datos en Pipedrive, lo que afectaría la precisión del análisis.\n\nSe evaluará su relevancia para el \"Churn Comercial\" más adelante en el análisis.\n\n## Caracteristicas de las Actividades: Etapa Experiencia\n\n#### Contexto\n\nLas acciones dentro del **Embudo de Experiencia** corresponden a las siguientes **Etapas** y **Actividades**:\n\n### Etapas:\n\n-   **Contacto Inicial**: Primer contacto con el Lead Ganado, usualmente en una reunión de **Kick Off**.\n-   **Onboarding**: Etapa en la que el Lead recibe capacitación sobre el uso del sistema.\n-   **Sin Adopción**: Cuando el Lead aún no ha adoptado el uso del sistema.\n-   **Adopción**: Cuando el Lead ha comenzado a usar el sistema de manera efectiva.\n\n### Actividades entre Etapas:\n\n-   **Kick Off**: Primer contacto con el Lead ganado, generalmente realizado de manera online (puede ser cancelado).\n-   **Llamadas de Seguimiento**: Pueden ser efectivas o no efectivas, según el progreso del Lead.\n-   **Capacitación ERP**: Reuniones en las que se capacita al Lead sobre el uso del sistema.\n-   **Seguimiento por WhatsApp (WSP)**: Comunicación adicional para continuar el seguimiento.\n-   **Video WhatsApp**: Seguimiento o capacitación a través de video.\n\n```{python}\n#| include: false\n# count leads per 'Razon de la perdida'\ncount_leads = df.groupby('Razón de la pérdida')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Razón de la pérdida', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads segun Razón de Pérdida', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDe los Leads considerados, 35 han sido clasificados como \"perdidos\" desde enero de 2021, lo que representa el 48% del total, experimentando \"Churn\", ya sea \"Churn Comercial\" o por otras razones.\n\nLa principal causa de pérdida es \"No Customer\" (28.57%), es decir, Leads que no debieron ser considerados como Tenants. En cambio, la insatisfacción con el producto es mínima (2.86%), lo que sugiere que factores externos pueden ser más relevantes que la satisfacción con el producto al momento del \"Churn\".\n\n```{python}\n#| include: false\n# count leads per 'Primera Reunion'\ncount_leads = df.groupby('Tipo Primera Reunión_y')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Primera Reunión_y', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por tipo de Kick Off', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads con información sobre Kick Off, 37% (22 Leads), el 100% tiene registrada una Kick Off realizada. Sin embargo, se observa una reducción en la cantidad de Leads con esta actividad, lo cual podría deberse a diversos factores:\n\n-   Reemplazo de la Kick Off por otra actividad inicial.\n-   Omisión en el registro de la actividad.\n-   Cambios en el proceso de onboarding.\n-   Aun no se ha iniciado con las actividades dentro del proceso de Experiencia.\n-   Error en el llenado de datos.\n\n```{python}\n#| include: false\n# count leads per 'Primera Reunion'\ncount_leads = df.groupby('Tipo Primera Capacitación')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Primera Capacitación', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por tipo de Primera Capacitación ERP', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads con información sobre Kick Off, 50.7% (37 Leads), el 100% tiene registrada la primera Capacitacion ERP Hecha. Sin embargo, se observa una reducción en la cantidad de Leads con esta actividad, lo cual podría deberse a diversos factores:\n\n-   Omisión en el registro de la actividad.\n-   Cambios en el proceso de onboarding.\n-   Aun no se ha iniciado con las actividades dentro del proceso de Experiencia.\n-   Error en el llenado de datos.\n\n### Etiqueta: 'Churn Comercial'\n\n```{python}\n#| include: false\n# count leads per 'Churn Status'\ncount_leads = df.groupby('Churn Status')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='Churn Status', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Churn Status', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nSe puede observar que los Leads considerados para este analisis, la gran mayoria son Leads que aun se consideran como 'Ganados' representando el 52.05% del total.\n\nEl porcentaje de Leads perdidos es del 47.95% (35 Leads), de los cuales el 80% representa el Churn Comercial y el restante 20% a otro tipo de Churn, se considera Churn comercial a los Leads perdidos dentro de los primeros 90 dias desde que se considera ganado","srcMarkdownNoYaml":"\n\n```{python}\n#| include: false\nimport os\nimport pandas as pd\nfrom datetime import datetime, timedelta\nimport plotly.express as px\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n```\n\n```{python}\n#| include: false\npastel_colors = [\n    'rgba(100, 140, 200, 0.9)', \n    'rgba(250, 120, 180, 0.9)', \n    'rgba(100, 200, 150, 0.9)',\n    'rgba(250, 250, 150, 0.9)',\n    'rgba(240, 150, 120, 0.9)'\n]\n\n```\n\n```{python}\n#| include: false\n# import CSV to DataFrame\ndf_com = pd.read_csv(r'..\\data\\output_silver\\contact_metrics_com.csv')\ndf_exp = pd.read_csv(r'..\\data\\output_silver\\contact_metrics_exp.csv')\ndf = pd.read_csv(r'..\\data\\output_silver\\contact_metrics.csv')\n```\n\nSe plantea la hipótesis de que los patrones de contacto durante la etapa comercial podrían ser indicadores clave para predecir el \"Churn Comercial\" observado en la etapa de Experiencia.\n\nPara analizar esta idea, se ha examinado la información histórica de las actividades asociadas a todos los negocios ganados en la etapa comercial.\n\n## Datos Utilizados\n\nSe han utilizado los siguientes datos obtenidos del CRM Pipedrive:\\\n- Embudo Comercial: todas las actividades y todos los deals creados a partir de Enero del 2021 a la fecha, solo se consideraron los datos del embudo de Leads Calientes y en Estado 'Ganado'.\\\n- Embudo Experiencia: todas las actividades y todos los deals creados a partir de Enero del 2021 a la fecha, se consideraron los embudos 'Experiencia' y 'Churn'.\\\n\\\n**A partir de abril de 2024, se empezaron a considerar las etapas R1 y R2 en lugar de una única etapa denominada \"Reunión\". Cabe destacar que, para el periodo comprendido entre enero de 2021 y abril de 2024, la etapa única \"Reunión\" fue asociada retrospectivamente a la etapa R2.**\n\n## Caracteristicas de los Leads Ganados\n\n```{python}\n#| include: false\n# count leads per 'Origen'\ncount_leads = df.groupby('Origen')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='Origen', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Origen', \n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color='color',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nLa mayoría de los Deals se generan automáticamente a través de la API, representando más del 50% del total. Le siguen los Leads creados manualmente, mientras que los Deals Importados desde Marketplace o Chatbot tienen una proporción significativamente menor. Finalmente, los Leads generados desde Formularios Web constituyen la menor proporción de los canales analizados.\n\n```{python}\n#| include: false\n# count leads per 'Tipo de cliente'\ncount_leads = df.groupby('Tipo de cliente')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo de cliente', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Tipo de cliente', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors \n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'array', 'categoryarray': sorted(count_leads['Tipo de cliente'].unique())}\n)\n\nfig.show()\n```\n\nEl análisis muestra que la mayoría de los Leads ganados pertenecen a la categoría B, con un 64.38% del total, seguidos por los de categoría A (26.03%) y categoría C (9.59%).\n\nEsto indica que los Leads tipo B tienen una mayor probabilidad de conversión, aunque los Leads tipo C, a pesar de tener el porcentaje más bajo de conversión, aún tienen potencial para convertirse en Leads ganados, lo que sugiere que no están completamente fuera del alcance del proceso comercial.\n\n```{python}\n#| include: false\n# count leads per 'Canal Agrupado'\ncount_leads = df.groupby('Canal Agrupado')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='Canal Agrupado', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Canal Agrupado', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors \n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nEl canal que captura el mayor porcentaje de Leads ganados es 'Paid Ads', con un 61.64% del total. Le sigue el canal 'Orgánico' con 28.77%, mientras que 'Eventos' y 'Murturing' representan solo un 4.11% cada uno. Como se había anticipado, los canales con menor conversión, como Outbound y Referrals, no están presentes en este análisis.\n\nDado que 'Paid Ads' genera la mayor proporción de Leads, se sugiere reconsiderar la inversión mensual y ajustar el punto de equilibrio utilizando el modelo de regresión, considerando otras variables que puedan influir. Esto ayudaría a maximizar el rendimiento de este canal.\n\n```{python}\n#| include: false\n# count leads per '(C*)¿Quien toma la decisión de compra?'\ncount_leads = df.groupby('(C*)¿Quien toma la decisión de compra?')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='(C*)¿Quien toma la decisión de compra?', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por ¿Quien toma la decisión de compra?', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads, el 96% (70 Leads) cuenta con información sobre quién toma la decisión de compra.\n\nLa mayoría de los Leads ganados provienen de casos donde el decisor es quien establece el primer contacto con la empresa, representando el 47.14%. Esto indica que los Leads ganados suelen ser socios o dueños que se contactan directamente con tuGerente.com.\n\nUn 14.29% de los Leads ganados proviene de personas que contactan a tuGerente, pero no son los decisores finales. Esto sugiere que, aunque no sean los responsables de la decisión, juegan un rol relevante en el proceso.\n\nEl 8.57% restante de Leads ganados corresponde a personas que toman la decisión de compra junto a su pareja, lo que indica que, incluso en negocios pequeños o familiares, sigue existiendo potencial de conversión.\n\n```{python}\n#| include: false\n# count leads per '¿Cuál es tu nivel de urgencia para resolver tu problema? #1'\ncount_leads = df.groupby('¿Cuál es tu nivel de urgencia para resolver tu problema? #1')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='¿Cuál es tu nivel de urgencia para resolver tu problema? #1', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Nivel de Urgencia', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    #xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads, el 94.5% (69 Leads) tiene información sobre el nivel de urgencia. El 79.71% de los Leads ganados muestra alta urgencia, lo que resalta la importancia de priorizar este segmento para maximizar conversiones.\n\nCabe destacar la ausencia de Leads con baja urgencia, posiblemente por desinterés o falta de enfoque en su captura.\n\nEs crucial objetivizar esta variable para evitar interpretaciones subjetivas.\n\n## Características de las Actividades: Etapa Comercial\n\n### Contexto\n\nLas acciones dentro del **Embudo Comercial** corresponden a las siguientes **Etapas** y **Actividades**:\n\n### Etapas:\n\n-   **R1**: Primera Reunión, realizada de manera online (puede ser cancelada).\n-   **R2**: Segunda Reunión, que puede ser presencial (**insitu**), fuera de oficinas (**out**), u online.\n-   **Seguimiento**: Monitoreo y acciones posteriores al contacto inicial.\n-   **Cierre**: Etapa final para concretar la conversión del Lead.\n\n### Actividades entre Etapas:\n\n-   **Llamadas de Prospección**:\n    -   **Efectivas**: Cuando se establece un primer contacto significativo.\n    -   **No Efectivas**: Cuando el primer contacto no genera resultados.\n-   **Llamadas de Seguimiento**:\n    -   **Efectivas**: Cuando contribuyen al progreso del Lead.\n    -   **No Efectivas**: Cuando no generan avance.\n-   **Llamadas Sin Avance**: Llamadas contestadas o no, que no aportan información valiosa.\n-   **Seguimiento por WhatsApp (WSP)**: Comunicación adicional para dar continuidad al proceso.\n-   **Video WhatsApp**: Seguimiento o interacción mediante video.\n\n```{python}\n#| include: false\n# count leads per 'Tipo Primer Contacto'\ncount_leads = df.groupby('Tipo Primer Contacto')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Primer Contacto', \n    y='Cantidad de Leads', \n    title='Cantidad de Tipo de Primer Contacto Comercial', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDe los Leads ganados, solo el 75% tiene información sobre un primer intento de contacto, ya sea una Llamada de Prospección o una Llamada Sin Avance. Sin embargo, entre esos Leads, el 83.64% tuvo un primer contacto efectivo. Esto sugiere que cuando el primer contacto es efectivo, las probabilidades de conversión aumentan, mientras que la conversión disminuye si el primer contacto no es efectivo o no avanza.\n\n```{python}\n#| include: false\n# count leads per 'Tipo Primera Reunión'\ncount_leads = df.groupby('Tipo Primera Reunión_x')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Primera Reunión_x', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads segun Tipo de R1', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    #xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads registrados, solo el 39.7% (29 Leads) tiene información sobre si se realizó una Primera Reunión, lo que sugiere que no siempre se lleva a cabo para considerar un Lead como \"ganado\".\n\nPor otro lado, el 100% de los Leads ganados que tienen registrada una Primera Reunión la han completado. Esto sugiere que agendar y realizar la Primera Reunión sin cancelaciones es clave para la conversión exitosa del Lead.\n\n```{python}\n#| include: false\n# count leads per 'Tipo Primera Reunión'\ncount_leads = df.groupby('Tipo Segunda Reunión')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Segunda Reunión', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads segun Tipo de R2', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    #xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads registrados, solo el 78% (57 Leads) tiene información sobre si se realizó una Segunda Reunión (R2). Esto sugiere que no siempre se lleva a cabo una Segunda Reunión para considerar un Lead como \"ganado\". La mayoría de la información sobre la Segunda Reunión se debe a que la etapa \"Reunión\" se asoció retrospectivamente con R2.\n\nPor otro lado, el 100% de los Leads ganados que tienen registrada una Segunda Reunión la han completado, lo que indica que agendar y realizar esta reunión sin cancelaciones es un factor clave para la conversión exitosa del Lead.\n\n```{python}\n#| include: false\n# count leads per 'Rango de Contacto'\ncount_leads = df.groupby('Rango de Contacto')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Rango de Contacto', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads segun Rango de Contacto', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nSe observa que la mayoría de los Leads \"Ganados\" presentan un alto porcentaje de Llamadas de Prospección fuera del rango de los 6 minutos, o directamente no tienen intento de Primera Llamada dentro de este intervalo, según análisis previos.\n\nEsto sugiere que el rango de los 6 minutos podría no ser determinante en la conversión de Leads, o que existe un error en el llenado de los datos en Pipedrive, lo que afectaría la precisión del análisis.\n\nSe evaluará su relevancia para el \"Churn Comercial\" más adelante en el análisis.\n\n## Caracteristicas de las Actividades: Etapa Experiencia\n\n#### Contexto\n\nLas acciones dentro del **Embudo de Experiencia** corresponden a las siguientes **Etapas** y **Actividades**:\n\n### Etapas:\n\n-   **Contacto Inicial**: Primer contacto con el Lead Ganado, usualmente en una reunión de **Kick Off**.\n-   **Onboarding**: Etapa en la que el Lead recibe capacitación sobre el uso del sistema.\n-   **Sin Adopción**: Cuando el Lead aún no ha adoptado el uso del sistema.\n-   **Adopción**: Cuando el Lead ha comenzado a usar el sistema de manera efectiva.\n\n### Actividades entre Etapas:\n\n-   **Kick Off**: Primer contacto con el Lead ganado, generalmente realizado de manera online (puede ser cancelado).\n-   **Llamadas de Seguimiento**: Pueden ser efectivas o no efectivas, según el progreso del Lead.\n-   **Capacitación ERP**: Reuniones en las que se capacita al Lead sobre el uso del sistema.\n-   **Seguimiento por WhatsApp (WSP)**: Comunicación adicional para continuar el seguimiento.\n-   **Video WhatsApp**: Seguimiento o capacitación a través de video.\n\n```{python}\n#| include: false\n# count leads per 'Razon de la perdida'\ncount_leads = df.groupby('Razón de la pérdida')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Razón de la pérdida', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads segun Razón de Pérdida', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDe los Leads considerados, 35 han sido clasificados como \"perdidos\" desde enero de 2021, lo que representa el 48% del total, experimentando \"Churn\", ya sea \"Churn Comercial\" o por otras razones.\n\nLa principal causa de pérdida es \"No Customer\" (28.57%), es decir, Leads que no debieron ser considerados como Tenants. En cambio, la insatisfacción con el producto es mínima (2.86%), lo que sugiere que factores externos pueden ser más relevantes que la satisfacción con el producto al momento del \"Churn\".\n\n```{python}\n#| include: false\n# count leads per 'Primera Reunion'\ncount_leads = df.groupby('Tipo Primera Reunión_y')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Primera Reunión_y', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por tipo de Kick Off', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads con información sobre Kick Off, 37% (22 Leads), el 100% tiene registrada una Kick Off realizada. Sin embargo, se observa una reducción en la cantidad de Leads con esta actividad, lo cual podría deberse a diversos factores:\n\n-   Reemplazo de la Kick Off por otra actividad inicial.\n-   Omisión en el registro de la actividad.\n-   Cambios en el proceso de onboarding.\n-   Aun no se ha iniciado con las actividades dentro del proceso de Experiencia.\n-   Error en el llenado de datos.\n\n```{python}\n#| include: false\n# count leads per 'Primera Reunion'\ncount_leads = df.groupby('Tipo Primera Capacitación')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\nfig = px.bar(\n    count_leads, \n    x='Tipo Primera Capacitación', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por tipo de Primera Capacitación ERP', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nDel total de Leads con información sobre Kick Off, 50.7% (37 Leads), el 100% tiene registrada la primera Capacitacion ERP Hecha. Sin embargo, se observa una reducción en la cantidad de Leads con esta actividad, lo cual podría deberse a diversos factores:\n\n-   Omisión en el registro de la actividad.\n-   Cambios en el proceso de onboarding.\n-   Aun no se ha iniciado con las actividades dentro del proceso de Experiencia.\n-   Error en el llenado de datos.\n\n### Etiqueta: 'Churn Comercial'\n\n```{python}\n#| include: false\n# count leads per 'Churn Status'\ncount_leads = df.groupby('Churn Status')['org_id.value'].nunique().reset_index(name='Cantidad de Leads')\n\n# percentage calculation\ncount_leads['Porcentaje'] = (count_leads['Cantidad de Leads'] / count_leads['Cantidad de Leads'].sum()) * 100\n```\n\n```{python}\nmax_value = count_leads['Cantidad de Leads'].max()\n\ncount_leads['color'] = count_leads['Cantidad de Leads'].apply(\n    lambda x: 'highlight' if x == max_value else 'gray'\n)\n\ncustom_colors = {\n    'highlight': 'rgba(175, 76, 76, 0.9)',\n    'gray': 'rgba(189, 189, 189, 0.7)'\n}\n\nfig = px.bar(\n    count_leads, \n    x='Churn Status', \n    y='Cantidad de Leads', \n    title='Cantidad de Leads por Churn Status', \n    color='color',\n    text=count_leads['Porcentaje'].round(2).astype(str) + '%',\n    color_discrete_map=custom_colors\n)\n\nfig.update_layout(\n    template=\"plotly_white\", \n    width=700, \n    height=500, \n    showlegend=False,\n    xaxis={'categoryorder': 'total descending'}\n)\n\nfig.show()\n```\n\nSe puede observar que los Leads considerados para este analisis, la gran mayoria son Leads que aun se consideran como 'Ganados' representando el 52.05% del total.\n\nEl porcentaje de Leads perdidos es del 47.95% (35 Leads), de los cuales el 80% representa el Churn Comercial y el restante 20% a otro tipo de Churn, se considera Churn comercial a los Leads perdidos dentro de los primeros 90 dias desde que se considera ganado"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"kable","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","self-contained":true,"embed-resources":true,"output-file":"EDA contactabilidad.html"},"language":{"toc-title-document":"Tabla de contenidos","toc-title-website":"En esta página","related-formats-title":"Otros formatos","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Fuente","other-links-title":"Otros Enlaces","code-links-title":"Enlaces de código","launch-dev-container-title":"Iniciar Dev Container","launch-binder-title":"Iniciar Binder","article-notebook-label":"Cuaderno de Artículo","notebook-preview-download":"Descargar Cuaderno","notebook-preview-download-src":"Descargar código fuente","notebook-preview-back":"Volver al Artículo","manuscript-meca-bundle":"Archivo MECA","section-title-abstract":"Resumen","section-title-appendices":"Apéndices","section-title-footnotes":"Notas","section-title-references":"Referencias","section-title-reuse":"Reutilización","section-title-copyright":"Derechos de autor","section-title-citation":"Cómo citar","appendix-attribution-cite-as":"Por favor, cita este trabajo como:","appendix-attribution-bibtex":"BibTeX","appendix-view-license":"Ver Licencia","title-block-author-single":"Autor/a","title-block-author-plural":"Autores/as","title-block-affiliation-single":"Afiliación","title-block-affiliation-plural":"Afiliaciones","title-block-published":"Fecha de publicación","title-block-modified":"Fecha de modificación","title-block-keywords":"Palabras clave","callout-tip-title":"Tip","callout-note-title":"Nota","callout-warning-title":"Advertencia","callout-important-title":"Importante","callout-caution-title":"Precaución","code-summary":"Código","code-tools-menu-caption":"Código","code-tools-show-all-code":"Mostrar todo el código","code-tools-hide-all-code":"Ocultar todo el código","code-tools-view-source":"Ver el código fuente","code-tools-source-code":"Ejecutar el código","tools-share":"Compartir","tools-download":"Descargar","code-line":"Línea","code-lines":"Líneas","copy-button-tooltip":"Copiar al portapapeles","copy-button-tooltip-success":"Copiado","repo-action-links-edit":"Editar esta página","repo-action-links-source":"Ver el código","repo-action-links-issue":"Informar de un problema","back-to-top":"Volver arriba","search-no-results-text":"Sin resultados","search-matching-documents-text":"documentos encontrados","search-copy-link-title":"Copiar el enlace en la búsqueda","search-hide-matches-text":"Ocultar resultados adicionales","search-more-match-text":"resultado adicional en este documento","search-more-matches-text":"resultados adicionales en este documento","search-clear-button-title":"Borrar","search-text-placeholder":"","search-detached-cancel-button-title":"Cancelar","search-submit-button-title":"Enviar","search-label":"Buscar","toggle-section":"Alternar sección","toggle-sidebar":"Alternar barra lateral","toggle-dark-mode":"Alternar modo oscuro","toggle-reader-mode":"Alternar modo lector","toggle-navigation":"Navegación de palanca","crossref-fig-title":"Figura","crossref-tbl-title":"Tabla","crossref-lst-title":"Listado","crossref-thm-title":"Teorema","crossref-lem-title":"Lema","crossref-cor-title":"Corolario","crossref-prp-title":"Proposición","crossref-cnj-title":"Conjetura","crossref-def-title":"Definición","crossref-exm-title":"Ejemplo","crossref-exr-title":"Ejercicio","crossref-ch-prefix":"Capítulo","crossref-apx-prefix":"Apéndice","crossref-sec-prefix":"Sección","crossref-eq-prefix":"Ecuación","crossref-lof-title":"Listado de Figuras","crossref-lot-title":"Listado de Tablas","crossref-lol-title":"Listado de Listados","environment-proof-title":"Prueba","environment-remark-title":"Observación","environment-solution-title":"Solución","listing-page-order-by":"Ordenar por","listing-page-order-by-default":"Por defecto","listing-page-order-by-date-asc":"Menos reciente","listing-page-order-by-date-desc":"Más reciente","listing-page-order-by-number-desc":"De mayor a menor","listing-page-order-by-number-asc":"De menor a mayor","listing-page-field-date":"Fecha","listing-page-field-title":"Título","listing-page-field-description":"Descripción","listing-page-field-author":"Autor/a","listing-page-field-filename":"Nombre de archivo","listing-page-field-filemodified":"Fecha de modificación","listing-page-field-subtitle":"Subtítulo","listing-page-field-readingtime":"Tiempo de lectura","listing-page-field-wordcount":"Conteo de Palabras","listing-page-field-categories":"Categorías","listing-page-minutes-compact":"{0} minutos","listing-page-category-all":"Todas","listing-page-no-matches":"No hay resultados","listing-page-words":"{0} palabras","listing-page-filter":"Filtro","draft":"Borrador"},"metadata":{"lang":"es","fig-responsive":true,"quarto-version":"1.5.57","title":"ANÁLISIS: 'Relación entre patrones de contactabilidad y 'Churn Comercial'","author":"Flavia Davila","editor":"visual"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":[]}